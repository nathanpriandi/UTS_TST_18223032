You're running into two separate, major issues. The first is a React version mismatch in your code, and the second is a build-time error because your app can't fetch data from its backend.
Here’s a breakdown of both problems and how to fix them.

Problem 1: useActionState is Not Exported (The Warnings)
Your build log is filled with this warning: Attempted import error: 'useActionState' is not exported from 'react'

What's Happening: The useActionState hook is a new feature in React 19. Your package.json file, however, specifies you are using React 18 ("react": "^18.3.1").

Your code (like in add-address.tsx) is trying to import and use a hook that doesn't exist in the version of React you have installed.

How to Fix It: You need to use the React 18-compatible hook, which is useFormState. It is imported from react-dom, not react.

You must change this in all the files listed in the warnings (like add-address.tsx, login/index.tsx, profile-name/index.tsx, etc.).

You're running into two separate, major issues. The first is a React version mismatch in your code, and the second is a build-time error because your app can't fetch data from its backend.

Here’s a breakdown of both problems and how to fix them.

Problem 1: useActionState is Not Exported (The Warnings)
Your build log is filled with this warning: Attempted import error: 'useActionState' is not exported from 'react'

What's Happening: The useActionState hook is a new feature in React 19. Your package.json file, however, specifies you are using React 18 ("react": "^18.3.1").

Your code (like in add-address.tsx) is trying to import and use a hook that doesn't exist in the version of React you have installed.

How to Fix It: You need to use the React 18-compatible hook, which is useFormState. It is imported from react-dom, not react.

You must change this in all the files listed in the warnings (like add-address.tsx, login/index.tsx, profile-name/index.tsx, etc.).

Example fix for src/modules/account/components/address-card/add-address.tsx:

Change your imports:

From:

JavaScript

import { useEffect, useState, useActionState } from "react"
To:

JavaScript

import { useEffect, useState } from "react"
import { useFormState } from "react-dom"
Change the hook:

From:

JavaScript

const [formState, formAction] = useActionState(addCustomerAddress, {
To:

JavaScript

const [formState, formAction] = useFormState(addCustomerAddress, {
Applying this change to all the affected components will fix the import errors.

Problem 2: Failed to fetch categories (The Build Crash)
After the warnings, your build crashes with this error: Error: Failed to fetch categories from Fake Store API Error: Failed to collect page data for /[countryCode]/collections/[handle]

What's Happening: Your Next.js app is trying to build static pages by running the generateStaticParams function in your page files (like src/app/[countryCode]/(main)/collections/[handle]/page.tsx).

This function calls listCollections() (or listCategories() in another file) to get data from your Medusa backend. The build is failing because it cannot connect to the backend to fetch this data.

How to Fix It: This is an environment variable issue. In your previous error, you were missing the public key (NEXT_PUBLIC_MEDUSA_PUBLISHABLE_KEY). This new error means you are missing the server-side key that tells your app where your backend is.

You need to add the environment variable for your Medusa backend URL (it's often MEDUSA_BACKEND_URL) to your Vercel project settings.

Find the MEDUSA_BACKEND_URL from your Medusa server deployment.

Go to your project on Vercel.

Go to Settings > Environment Variables.

Add the key MEDUSA_BACKEND_URL with your backend's URL as the value.

Re-run the build.

I also see a warning in your log that you should fix: warning package-lock.json found. Your project contains lock files generated by tools other than Yarn.

Your project is set up to use Yarn ("packageManager": "yarn@4.6.0" in package.json), but a package-lock.json (from npm) file is also present. This will cause unpredictable dependency issues.